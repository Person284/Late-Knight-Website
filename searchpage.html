<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="style.css" rel="stylesheet">
    <title>Late Knight</title>
    <link rel="icon" href="src/lklogo.png">
</head>

<body>
    <div id="starscont">
        <div id="starpattern"></div>
    </div>
    
    <div class="header">

        <div>
            <a href="index.html"><img src="src/lklogo.png" alt="Late Knight Logo"></a>
        </div>

        <div id="nav">

                <a href="https://plu.edu">
                    <button class="headerButtons">PLU</button>
                </a>

                <a href="https://www.youtube.com/@MastMediaPLU">
                    <button class="headerButtons">YouTube</button>
                </a>

                <button class="headerButtons" id="search">
                    <img src="src/search-icon.png">
                </button>
        </div>

    </div>
    
    <div class="backgroundimg">

        <div>
            <img src="src/lklogo.png" alt="Late Knight Logo" width="300" id="bgimg">
        </div>

    </div>

    <!-- only add to these divs -->
    <div class="content">
        <div class="main">
            <h1>Late Knight</h1>

            <div class="searchbar">
                <input type="text" placeholder="Search" id="searchvids">
                <button id="submitButton">Search</button>
            </div>
            <div class="results">
                <table id="resulttable">
                    <thead>
                        <tr>
                            <th>Season</th>
                            <th>Episode</th>
                            <th>Release Date</th>
                            <th>Host(s)</th>
                            <th>Musical Guest</th>
                            <th>Description</th>
                            <th>Link</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- only add to these divs -->
        
    <footer>
        <div class="links">
            <a href=https://twitter.com/plulateknight target=”_blank”><img src="src/icons8-twitter-48.png" alt="Late Knight Logo""></a>

            <a href="https://www.facebook.com/plulateknight" target=”_blank”><img src="src/icons8-facebook-48.png" alt="Late Knight Logo""></a>

            <a href="https://www.instagram.com/plulateknight/?hl=en" target=”_blank”><img src="src/icons8-instagram-48.png" alt="Late Knight Logo""></a>
            
            <a href="https://www.youtube.com/@MastMediaPLU" target=”_blank”><img src="src/icons8-youtube-48.png" alt="Late Knight Logo""></a>
        </div>
        <div id="copyright">
            <p>© 2024 Lake Knight, PLU. All rights reserved</p>
        </div>
        <div class="logo">
            <img src="src/lklogo.png" alt="Late Knight Logo"">
        </div>
    </footer>

    <script>
        let query;
        
        document.getElementById("submitButton").addEventListener('click', loadText)
        
        function loadText(){
            var xhr = new XMLHttpRequest();

            xhr.open('GET', 'src/test.json', true);

            query = document.getElementById("searchvids").value;

            xhr.send("Hello, world!");
            
            xhr.onload = function(){
                if(this.status == 200){
                    const response = xhr.responseText;
                    var result = JSON.parse(this.responseText);

                    var output = '';

                    for(var entry of result){
                        output += '<tr><td>' + entry.season +'</td>' +
                        '<td>'+ entry.episode +'</td>'+
                        '<td>'+ entry.releasedate +'</td>'+
                        '<td>'+ entry.host +'</td>'+
                        '<td>'+ entry.musicalguest +'</td>'+
                        '<td>'+ entry.description +'</td>'+
                        '<td><a href='+ entry.link +'>youtube</a></td></tr>';
                    }

                    document.getElementById('tableBody').innerHTML = output;
                }
            }

            xhr.send();

            console.log(query)
        }
    </script>
</body>

</html>